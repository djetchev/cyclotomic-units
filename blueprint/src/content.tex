% In this file you should put the actual content of the blueprint.
% It will be used both by the web and the print version.
% It should *not* include the \begin{document}
%
% If you want to split the blueprint content into several files then
% the current file can be a simple sequence of \input. Otherwise It
% can start with a \section or \chapter for instance.

\chapter{Introduction}
This is my first experimental mini-project 
to formalize the theory of cyclotomic units in Lean. 


\chapter{Regulators of Number Fields}
This chapter presents basic definitions and results on regulators of number fields.

Let $L$ be a number field with $r_1$ real and $r_2$ complex embeddings and let $r = r_1 + r_2 - 1$. 

\section{Definition of the regulator}\label{sec:regulator}

Let $\epsilon_1, \dots, \epsilon_r$ be a set of independent units of $L$. 

\begin{definition}\label{defn:mixed-embeddings}
    \lean{NumberField.mixedEmbedding}
    \leanok
    Let $\sigma_1, \dots, \sigma_{r_1}$ 
    be the set of real embeddings and let $(\sigma_{r_1 + 1}, \overline{\sigma}_{r_1 + 1}), \dots, (\sigma_{r}, \overline{\sigma}_{r})$ be the 
    pairs of conjugate complex embeddings.
\end{definition}

\begin{definition}\label{defn:regulator}
    \uses{defn:mixed-embeddings}
    \lean{NumberField.canonicalEmbedding}
    \leanok
    We define the regulator of the units $\epsilon_1, \dots, \epsilon_r$ of $L$ as 
    $$
    R_L(\epsilon_1, \dots, \epsilon_r) := \sqrt{\det(\delta_{i} \log | \sigma_i(\epsilon_j) | )_{i, j}}, 
    $$
    where 
    $$
    \delta_i = 
    \begin{cases}
    1 & \text{ if } \sigma_i \text{ is real}, \\
    2 & \text{ if } \sigma_i \text{ is complex}.
    \end{cases}
    $$
\end{definition}


\chapter{The Index of Cyclotomic Units}

\section{Maximal real subfield}
\begin{definition}\label{defn:Kplus}
    Let $K = \mathbb{Q}(\zeta_n)$ where $\zeta_n$ is a primitive $n$-th root of unit. 
    Define the subfield $K^+ := \mathbb{Q}(\zeta_n + \zeta_n^{-1})$ of $K$.
\end{definition}

\begin{lemma}\label{lem:Kplus}
    \uses{defn:Kplus}
    The subfield $K^+$ is the maximal real subfield of $K$.
\end{lemma}

\begin{proof}
\end{proof}

\section{Cyclotomic units}
\begin{definition}\label{defn:cyclo-units}
    Define the cyclotomic units of a cyclotomic field $K = \mathbb{Q}(\zeta_n)$ with ring of integers 
    $O_K = \mathbb{Z}[\zeta_n]$ as the group 
    $$
    C_K := O_K^\times \cap \langle \zeta_n^a, 1 - \zeta_n^b \colon a, b \in \mathbb{Z} / n \mathbb{Z}\rangle. 
    $$
\end{definition}

\section{Index theorem}
\begin{theorem}\label{thm:index}
    \uses{defn:cyclo-units}
    Let $n := p^m \in \mathbb{N}$ for a prime $p$ and a positive integer $m$, and let $K = \mathbb{Q}(\zeta_n)$ where $\zeta_n$ is a primitive $n$-th root of unit. 
    Let $O_K$ be the ring of integers of $K$. 
    Let $C_K$ be the group of cyclotomic units in $K$ according to Definition~\ref{defn:cyclo-units}.
    Then
    \[
        [O_{K^+}^\times : C_{K^+}] = h_{K^+},
    \]
    where $h_{K^+}$ is the class number of the maximal real subfield $K^+$ of $K$.
\end{theorem}

\begin{proof}
    \proves{thm:Kplus}
    \uses{lem:regRa}
    \begin{itemize}
        \item Show that the regulator of the units $\zeta(a)$ is non-zero, where 
        $$
        \zeta(a) := \zeta_{p^m}^{(1-a)/2} \frac{1 - \zeta_{p^m}^a}{1 - \zeta_{p^m}}, \qquad 1 < a < p^m / 2, \ (a, p) = 1.
        $$
        \item We then compute the regulator $R(\{\zeta(a)\})$. 
    \end{itemize}
\end{proof}

\subsection{Computing the regulator for $K^+$}

\begin{lemma}\label{lem:regRa}
    We have 
    $$
    R(\{\zeta(a)\}) = h^+ R^+, 
    $$
    where $R^+$ is the regulator of $K^+$.
\end{lemma}

\begin{proof}
    \proves{lem:regRa}
\end{proof}

\subsection{The index of cyclotomic units and the regulator}

\begin{lemma}\label{lem:index-reg}
Let $\epsilon_1, \dots, \epsilon_r$ be independent units of a number field $K$ that generate a subgroup 
$A$ of the units of $K$ modulo roots of unity and let $\eta_1, \dots, \eta_r$ generate a subgroup 
$B$. If $A \subseteq B$ is of finite index then 
$$
[B : A] = \frac{R_K(\epsilon_1, \dots, \epsilon_r)}{R_K(\eta_1, \dots, \eta_r)}.
$$
\end{lemma}

\begin{proof}
\end{proof}